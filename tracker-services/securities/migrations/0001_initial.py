# Generated by Django 5.2.4 on 2025-09-15 21:05

import django.db.models.deletion
from decimal import Decimal
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='MarketRegime',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date', models.DateField(unique=True)),
                ('regime_type', models.CharField(choices=[('BULL', 'Bull Market'), ('BEAR', 'Bear Market'), ('SIDEWAYS', 'Sideways/Range-bound'), ('HIGH_VOLATILITY', 'High Volatility'), ('LOW_VOLATILITY', 'Low Volatility')], max_length=20)),
                ('vix_level', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True)),
                ('market_trend', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True)),
                ('volatility_regime', models.DecimalField(blank=True, decimal_places=4, max_digits=8, null=True)),
                ('confidence', models.DecimalField(decimal_places=2, max_digits=4)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'ordering': ['-date'],
            },
        ),
        migrations.CreateModel(
            name='Security',
            fields=[
                ('symbol', models.CharField(max_length=20, primary_key=True, serialize=False, unique=True)),
                ('isin', models.CharField(blank=True, max_length=12, null=True, unique=True)),
                ('cusip', models.CharField(blank=True, max_length=9, null=True)),
                ('name', models.CharField(blank=True, max_length=200, null=True)),
                ('short_name', models.CharField(blank=True, max_length=50, null=True)),
                ('asset_class', models.CharField(choices=[('EQUITY', 'Stock'), ('ETF', 'ETF'), ('BOND', 'Bond'), ('MUTUAL_FUND', 'Mutual Fund'), ('COMMODITY', 'Commodity'), ('CRYPTO', 'Cryptocurrency'), ('REIT', 'REIT'), ('INDEX', 'Index'), ('OPTION', 'Option'), ('FUTURE', 'Future')], max_length=20)),
                ('security_type', models.CharField(blank=True, max_length=30, null=True)),
                ('primary_exchange', models.CharField(max_length=10)),
                ('currency', models.CharField(default='USD', max_length=3)),
                ('country', models.CharField(max_length=2)),
                ('sector', models.CharField(blank=True, choices=[('ENERGY', 'Energy'), ('MATERIALS', 'Materials'), ('INDUSTRIALS', 'Industrials'), ('CONSUMER_DISCRETIONARY', 'Consumer Discretionary'), ('CONSUMER_STAPLES', 'Consumer Staples'), ('HEALTHCARE', 'Healthcare'), ('FINANCIALS', 'Financials'), ('INFORMATION_TECHNOLOGY', 'Information Technology'), ('COMMUNICATION_SERVICES', 'Communication Services'), ('UTILITIES', 'Utilities'), ('REAL_ESTATE', 'Real Estate')], max_length=50, null=True)),
                ('industry', models.CharField(blank=True, max_length=100, null=True)),
                ('sub_industry', models.CharField(blank=True, max_length=100, null=True)),
                ('market_cap', models.BigIntegerField(blank=True, null=True)),
                ('shares_outstanding', models.BigIntegerField(blank=True, null=True)),
                ('maturity_date', models.DateField(blank=True, null=True)),
                ('coupon_rate', models.DecimalField(blank=True, decimal_places=4, max_digits=8, null=True)),
                ('credit_rating', models.CharField(blank=True, max_length=10, null=True)),
                ('expense_ratio', models.DecimalField(blank=True, decimal_places=4, max_digits=6, null=True)),
                ('fund_family', models.CharField(blank=True, max_length=100, null=True)),
                ('is_actively_traded', models.BooleanField(default=True)),
                ('average_volume', models.BigIntegerField(blank=True, null=True)),
                ('current_price', models.DecimalField(blank=True, decimal_places=6, max_digits=18, null=True)),
                ('data_source', models.CharField(default='yfinance', max_length=50)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'db_table': 'security',
                'indexes': [models.Index(fields=['asset_class', 'sector'], name='security_asset_c_d016e5_idx'), models.Index(fields=['currency', 'country'], name='security_currenc_bf28fe_idx'), models.Index(fields=['is_actively_traded'], name='security_is_acti_a2c8ed_idx')],
            },
        ),
        migrations.CreateModel(
            name='MarketSnapshot',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('current_price', models.DecimalField(decimal_places=6, max_digits=18)),
                ('bid_price', models.DecimalField(blank=True, decimal_places=6, max_digits=18, null=True)),
                ('ask_price', models.DecimalField(blank=True, decimal_places=6, max_digits=18, null=True)),
                ('bid_size', models.BigIntegerField(blank=True, null=True)),
                ('ask_size', models.BigIntegerField(blank=True, null=True)),
                ('open_price', models.DecimalField(blank=True, decimal_places=6, max_digits=18, null=True)),
                ('high_price', models.DecimalField(blank=True, decimal_places=6, max_digits=18, null=True)),
                ('low_price', models.DecimalField(blank=True, decimal_places=6, max_digits=18, null=True)),
                ('previous_close', models.DecimalField(blank=True, decimal_places=6, max_digits=18, null=True)),
                ('volume', models.BigIntegerField(default=0)),
                ('avg_volume_10d', models.BigIntegerField(blank=True, null=True)),
                ('avg_volume_30d', models.BigIntegerField(blank=True, null=True)),
                ('change_amount', models.DecimalField(blank=True, decimal_places=6, max_digits=18, null=True)),
                ('change_percent', models.DecimalField(blank=True, decimal_places=4, max_digits=8, null=True)),
                ('market_timestamp', models.DateTimeField()),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('security', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='current_market_data', to='securities.security')),
            ],
        ),
        migrations.CreateModel(
            name='RiskMetrics',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('calculation_date', models.DateField()),
                ('lookback_period', models.IntegerField()),
                ('volatility_annualized', models.DecimalField(blank=True, decimal_places=4, max_digits=8, null=True)),
                ('sharpe_ratio', models.DecimalField(blank=True, decimal_places=4, max_digits=8, null=True)),
                ('sortino_ratio', models.DecimalField(blank=True, decimal_places=4, max_digits=8, null=True)),
                ('max_drawdown', models.DecimalField(blank=True, decimal_places=4, max_digits=8, null=True)),
                ('var_95', models.DecimalField(blank=True, decimal_places=6, max_digits=12, null=True)),
                ('var_99', models.DecimalField(blank=True, decimal_places=6, max_digits=12, null=True)),
                ('beta', models.DecimalField(blank=True, decimal_places=4, max_digits=6, null=True)),
                ('alpha', models.DecimalField(blank=True, decimal_places=4, max_digits=8, null=True)),
                ('correlation_market', models.DecimalField(blank=True, decimal_places=4, max_digits=6, null=True)),
                ('total_return', models.DecimalField(blank=True, decimal_places=4, max_digits=8, null=True)),
                ('annualized_return', models.DecimalField(blank=True, decimal_places=4, max_digits=8, null=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('security', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='risk_metrics', to='securities.security')),
            ],
            options={
                'indexes': [models.Index(fields=['security', 'calculation_date'], name='securities__securit_2a255d_idx'), models.Index(fields=['sharpe_ratio'], name='securities__sharpe__f9cdd1_idx')],
                'unique_together': {('security', 'calculation_date', 'lookback_period')},
            },
        ),
        migrations.CreateModel(
            name='PriceHistory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date', models.DateField()),
                ('open_price', models.DecimalField(decimal_places=6, max_digits=18)),
                ('high_price', models.DecimalField(decimal_places=6, max_digits=18)),
                ('low_price', models.DecimalField(decimal_places=6, max_digits=18)),
                ('close_price', models.DecimalField(decimal_places=6, max_digits=18)),
                ('adjusted_close', models.DecimalField(decimal_places=6, max_digits=18)),
                ('volume', models.BigIntegerField()),
                ('dividend_amount', models.DecimalField(decimal_places=6, default=Decimal('0'), max_digits=12)),
                ('split_ratio', models.DecimalField(decimal_places=6, default=Decimal('1.0'), max_digits=10)),
                ('return_1d', models.DecimalField(blank=True, decimal_places=6, max_digits=10, null=True)),
                ('security', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='price_history', to='securities.security')),
            ],
            options={
                'ordering': ['-date'],
                'indexes': [models.Index(fields=['security', 'date'], name='securities__securit_9e1c6a_idx'), models.Index(fields=['date'], name='securities__date_f4d920_idx')],
                'unique_together': {('security', 'date')},
            },
        ),
        migrations.CreateModel(
            name='SecurityCorrelation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('calculation_date', models.DateField()),
                ('lookback_period', models.IntegerField()),
                ('price_correlation', models.DecimalField(decimal_places=4, max_digits=6)),
                ('return_correlation', models.DecimalField(blank=True, decimal_places=4, max_digits=6, null=True)),
                ('return_covariance', models.DecimalField(blank=True, decimal_places=8, max_digits=15, null=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('security_1', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='correlations_as_first', to='securities.security')),
                ('security_2', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='correlations_as_second', to='securities.security')),
            ],
            options={
                'indexes': [models.Index(fields=['security_1', 'security_2'], name='securities__securit_5570a8_idx')],
                'unique_together': {('security_1', 'security_2', 'calculation_date', 'lookback_period')},
            },
        ),
        migrations.CreateModel(
            name='TechnicalIndicators',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date', models.DateField()),
                ('sma_20', models.DecimalField(blank=True, decimal_places=6, max_digits=18, null=True)),
                ('sma_50', models.DecimalField(blank=True, decimal_places=6, max_digits=18, null=True)),
                ('sma_200', models.DecimalField(blank=True, decimal_places=6, max_digits=18, null=True)),
                ('ema_12', models.DecimalField(blank=True, decimal_places=6, max_digits=18, null=True)),
                ('ema_26', models.DecimalField(blank=True, decimal_places=6, max_digits=18, null=True)),
                ('rsi_14', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True)),
                ('macd_line', models.DecimalField(blank=True, decimal_places=6, max_digits=12, null=True)),
                ('macd_signal', models.DecimalField(blank=True, decimal_places=6, max_digits=12, null=True)),
                ('bb_upper', models.DecimalField(blank=True, decimal_places=6, max_digits=18, null=True)),
                ('bb_middle', models.DecimalField(blank=True, decimal_places=6, max_digits=18, null=True)),
                ('bb_lower', models.DecimalField(blank=True, decimal_places=6, max_digits=18, null=True)),
                ('support_level', models.DecimalField(blank=True, decimal_places=6, max_digits=18, null=True)),
                ('resistance_level', models.DecimalField(blank=True, decimal_places=6, max_digits=18, null=True)),
                ('security', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='technical_indicators', to='securities.security')),
            ],
            options={
                'ordering': ['-date'],
                'indexes': [models.Index(fields=['security', 'date'], name='securities__securit_9cf0cf_idx')],
                'unique_together': {('security', 'date')},
            },
        ),
        migrations.CreateModel(
            name='TradingSignal',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('signal_type', models.CharField(choices=[('BUY', 'Buy'), ('SELL', 'Sell'), ('HOLD', 'Hold'), ('REDUCE', 'Reduce Position'), ('INCREASE', 'Increase Position')], max_length=20)),
                ('signal_source', models.CharField(choices=[('MOMENTUM', 'Momentum Strategy'), ('MEAN_REVERSION', 'Mean Reversion'), ('TECHNICAL', 'Technical Analysis'), ('FUNDAMENTAL', 'Fundamental Analysis'), ('RISK_MANAGEMENT', 'Risk Management'), ('PORTFOLIO_REBALANCE', 'Portfolio Rebalancing')], max_length=30)),
                ('strength', models.DecimalField(decimal_places=2, max_digits=4)),
                ('target_price', models.DecimalField(blank=True, decimal_places=6, max_digits=18, null=True)),
                ('stop_loss', models.DecimalField(blank=True, decimal_places=6, max_digits=18, null=True)),
                ('time_horizon', models.IntegerField(blank=True, null=True)),
                ('risk_level', models.CharField(choices=[('LOW', 'Low'), ('MEDIUM', 'Medium'), ('HIGH', 'High')], default='MEDIUM', max_length=10)),
                ('reasoning', models.TextField(blank=True, null=True)),
                ('expiry_date', models.DateTimeField(blank=True, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('security', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='trading_signals', to='securities.security')),
            ],
            options={
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['security', 'is_active'], name='securities__securit_7ab43b_idx'), models.Index(fields=['signal_type', 'is_active'], name='securities__signal__eef508_idx'), models.Index(fields=['created_at'], name='securities__created_e3592e_idx'), models.Index(fields=['strength'], name='securities__strengt_7664e2_idx')],
            },
        ),
    ]
